---
sidebar: sidebar 
permalink: task-restore-backups-ontap.html 
keywords: restoring, restore, restore volumes, restore files, cloud backup, file restore, single file restore, volume restore, browse and restore, search and restore, ONTAP 
summary: 백업은 클라우드 계정의 오브젝트 저장소에 저장되므로 특정 시점에서 데이터를 복원할 수 있습니다. 백업 파일에서 전체 ONTAP 볼륨을 복원하거나 몇 개의 파일만 복원해야 하는 경우 백업 파일에서 개별 파일을 복원할 수 있습니다. 
---
= 백업 파일에서 ONTAP 데이터를 복원하는 중입니다
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
백업은 클라우드 계정의 오브젝트 저장소에 저장되므로 특정 시점에서 데이터를 복원할 수 있습니다. 백업 파일에서 전체 ONTAP 볼륨을 복원하거나 몇 개의 파일만 복원해야 하는 경우 백업 파일에서 개별 파일을 복원할 수 있습니다.

볼륨 * (새 볼륨으로)을 원래 작업 환경, 동일한 클라우드 계정을 사용하는 다른 작업 환경 또는 온프레미스 ONTAP 시스템으로 복원할 수 있습니다.

원래 작업 환경의 볼륨, 동일한 클라우드 계정을 사용하는 다른 작업 환경의 볼륨 또는 온프레미스 ONTAP 시스템의 볼륨으로 * 파일 * 을 복원할 수 있습니다.

백업 파일에서 운영 시스템으로 데이터를 복원하려면 유효한 Cloud Backup 라이센스가 필요합니다.



== 복구 대시보드

복구 대시보드를 사용하여 볼륨 및 파일 복원 작업을 수행합니다. Cloud Manager의 왼쪽 탐색 메뉴에서 * Backup & Restore * 를 클릭한 다음 * Restore * 탭을 클릭하여 Restore Dashboard에 액세스합니다. 을 클릭할 수도 있습니다 image:screenshot_gallery_options.gif["자세히 단추"] > * 서비스 패널의 백업 및 복원 서비스에서 복원 대시보드 보기 * 를 선택합니다.


NOTE: 하나 이상의 작업 환경에 대해 Cloud Backup이 이미 활성화되어 있어야 하며 초기 백업 파일이 있어야 합니다.

image:screenshot_restore_dashboard.png["Browse & amp; Restore 또는 Search & amp; Restore 기능을 사용할 수 있는 옵션이 표시된 Restore Dashboard입니다."]

보시다시피, 복원 대시보드는 백업 파일에서 데이터를 복원하는 두 가지 다른 방법을 제공합니다. * 찾아보기 및 복원 * 및 * 검색 및 복원 *.



== Browse & Restore와 Search & Restore 비교

일반적으로, 최근 주나 월로부터 특정 볼륨이나 파일을 복원해야 할 때 _Browse & Restore_가 더 낫습니다. 파일의 이름과 위치, 파일의 마지막 날짜를 알고 있어야 합니다. _Search & Restore_ 는 일반적으로 볼륨이나 파일을 복원해야 할 때 더 좋지만 정확한 이름, 해당 볼륨이 있는 볼륨 또는 마지막으로 양호한 상태의 날짜를 기억하지 못합니다.

이 표에서는 두 가지 방법을 비교합니다.

[cols="50,50"]
|===
| 찾아보기 및 복원 | 검색 및 복원 


| 폴더 스타일 구조를 탐색하여 단일 백업 파일 내에서 볼륨이나 파일을 찾습니다 | 일부 또는 전체 볼륨 이름, 일부 또는 전체 파일 이름, 크기 범위 및 추가 검색 필터를 사용하여 * 모든 백업 파일 * 에서 볼륨 또는 파일을 검색합니다 


| 볼륨 및 파일 복원은 Amazon S3, Azure Blob, Google Cloud 및 NetApp StorageGRID에 저장된 백업 파일과 함께 작동합니다. | 볼륨 및 파일 복원은 Amazon S3 및 Google Cloud에 저장된 백업 파일과 함께 작동합니다 


| 인터넷에 액세스할 수 없는 사이트에서 StorageGRID의 볼륨 및 파일을 복원합니다 | 어두운 사이트에서는 지원되지 않습니다 


| 이름이 바뀌거나 삭제된 파일은 처리하지 않습니다 | 새로 생성/삭제/이름 변경된 디렉토리와 새로 생성/삭제/이름 변경된 파일을 처리합니다 


| 퍼블릭 및 프라이빗 클라우드 전체에서 결과 검색 | 퍼블릭 클라우드 및 로컬 스냅샷 복사본에서 결과를 찾습니다 


| 추가 클라우드 공급자 리소스가 필요하지 않습니다 | 계정당 필요한 추가 버킷 및 퍼블릭 클라우드 공급자 리소스 


| 추가 클라우드 공급자 비용은 필요하지 않습니다 | 백업 및 볼륨에서 검색 결과를 검색할 때 퍼블릭 클라우드 공급자 리소스와 관련된 비용입니다 
|===
두 복원 방법을 모두 사용하려면 먼저 고유한 리소스 요구 사항에 맞게 환경을 구성해야 합니다. 이러한 요구 사항은 아래 섹션에 설명되어 있습니다.

사용할 복원 작업 유형에 대한 요구 사항 및 복원 단계를 참조하십시오.

* <<Restoring volumes using Browse & Restore,Browse & amp; Restore를 사용하여 볼륨을 복원합니다>>
* <<Restoring ONTAP files using Browse & Restore,Browse & amp; Restore를 사용하여 파일을 복원합니다>>
* <<Restoring volumes and files using Search & Restore,검색 및 amp;Restore를 사용하여 볼륨 및 파일을 복원합니다>>




== 찾아보기 및 복원을 사용하여 ONTAP 데이터를 복원합니다

볼륨 또는 파일 복원을 시작하기 전에 복원할 볼륨 또는 파일의 이름, 볼륨이 있는 작업 환경의 이름 및 복원할 백업 파일의 대략적인 날짜를 알아야 합니다.

* 참고: * 복원하려는 볼륨의 백업 파일이 아카이브 스토리지(ONTAP 9.10.1부터 시작)에 있는 경우 복원 작업에 더 많은 시간이 소요되고 비용이 발생합니다. 또한 대상 클러스터에서 ONTAP 9.10.1 이상이 실행되고 있어야 합니다.

ifdef::aws[]

link:reference-aws-backup-tiers.html["AWS 아카이브 스토리지에서 복원하는 방법에 대해 자세히 알아보십시오"].

endif::aws[]

ifdef::azure[]

link:reference-azure-backup-tiers.html["Azure 아카이브 스토리지에서 복원에 대해 자세히 알아보십시오"].

endif::azure[]



=== Browse & Restore 지원되는 작업 환경 및 객체 스토리지 공급자

ONTAP 백업 파일에서 다음 작업 환경으로 볼륨 또는 개별 파일을 복원할 수 있습니다.

[cols="30,35,35"]
|===
| 백업 파일 위치 2+| 대상 작업 환경 


|  | * 볼륨 복원 * | * 파일 복원 * ifdef::AWS[] 


| Amazon S3 | Cloud Volumes ONTAP를 사내의 AWS ONTAP 시스템에 설치하고 | Cloud Volumes ONTAP in AWS on-premises ONTAP system endif::AWS[]ifdef::Azure[] 


| Azure Blob | Azure 사내 ONTAP 시스템의 Cloud Volumes ONTAP | Azure 사내 ONTAP 시스템의 Cloud Volumes ONTAP endif::Azure []ifdef::GCP[] 


| Google 클라우드 스토리지 | Google 사내 ONTAP 시스템의 Cloud Volumes ONTAP | Google의 Cloud Volumes ONTAP(^1^) 온프레미스 ONTAP 시스템(^1^) 엔디프::GCP[] 


| NetApp StorageGRID를 참조하십시오 | 사내 ONTAP 시스템 | 사내 ONTAP 시스템 
|===
(^1^) _ 이(가) 지원을 받으려면 커넥터를 Google Cloud Platform VPC에 배포해야 합니다. _

"사내 ONTAP 시스템"을 지칭할 때 FAS, AFF 및 ONTAP Select 시스템이 포함됩니다.


NOTE: 백업 파일이 아카이브 스토리지에 있는 경우 볼륨 복원만 지원됩니다. Browse & Restore를 사용하는 경우 현재 아카이브 스토리지에서 파일 복원이 지원되지 않습니다.



=== Browse & Restore를 사용하여 볼륨을 복원합니다

백업 파일에서 볼륨을 복원하면 Cloud Backup은 백업의 데이터를 사용하여 _new_volume을 생성합니다. 원래 작업 환경의 볼륨이나 소스 작업 환경과 동일한 클라우드 계정에 있는 다른 작업 환경으로 데이터를 복원할 수 있습니다. 또한, 볼륨을 온프레미스 ONTAP 시스템으로 복원할 수 있습니다.

image:diagram_browse_restore_volume.png["Browse & amp; Restore를 사용하여 볼륨 복원 작업을 수행하는 흐름을 보여 주는 다이어그램"]

보시다시피 볼륨 복구를 수행하려면 작업 환경 이름, 볼륨 이름 및 백업 파일 날짜를 알아야 합니다.

다음 비디오에서는 볼륨 복원에 대한 간단한 단계별 안내를 보여 줍니다.

video::9Og5agUWyRk[youtube,width=848,height=480,end=164]
.단계
. 백업 및 복원 * 서비스를 선택합니다.
. Restore * 탭을 클릭하면 Restore Dashboard가 표시됩니다.
. Browse & Restore _ 섹션에서 * Restore Volume * 을 클릭합니다.
+
image:screenshot_restore_volume_selection.png["Restore Dashboard에서 Restore Volumes 버튼을 선택한 스크린샷"]

. Select Source_페이지에서 복원하려는 볼륨의 백업 파일로 이동합니다. 복원할 날짜/시간 스탬프가 있는 * Working Environment *, * Volume * 및 * Backup * 파일을 선택합니다.
+
image:screenshot_restore_select_volume_snapshot.png["복원할 작업 환경, 볼륨 및 볼륨 백업 파일을 선택하는 스크린샷."]

. 계속 * 을 클릭합니다.
. 대상 선택 페이지에서 볼륨을 복원할 * 작업 환경 * 을 선택합니다.
+
image:screenshot_restore_select_work_env_volume.png["복원하려는 볼륨의 대상 작업 환경을 선택하는 스크린샷."]

. 사내 ONTAP 시스템을 선택하고 오브젝트 스토리지에 대한 클러스터 연결을 아직 구성하지 않은 경우 추가 정보를 묻는 메시지가 표시됩니다.
+
ifdef::aws[]

+
** Amazon S3에서 복원할 때 대상 볼륨이 상주할 ONTAP 클러스터에서 IPspace를 선택하고 ONTAP 클러스터에 S3 버킷에 대한 액세스 권한을 부여하기 위해 생성한 사용자의 액세스 키 및 암호 키를 입력합니다. 그리고 데이터 전송 보안을 위해 프라이빗 VPC 엔드포인트를 선택할 수도 있습니다.




endif::aws[]

ifdef::azure[]

* Azure Blob에서 복구할 경우 대상 볼륨이 상주할 ONTAP 클러스터에서 IPspace를 선택하고, 오브젝트 스토리지에 액세스할 Azure 구독을 선택한 다음 VNET 및 서브넷을 선택하여 보안 데이터 전송을 위한 프라이빗 끝점을 선택합니다.


endif::azure[]

ifdef::gcp[]

* Google 클라우드 스토리지에서 복원할 때 Google 클라우드 프로젝트 및 액세스 키 및 비밀 키를 선택하여 오브젝트 스토리지, 백업이 저장되는 지역 및 대상 볼륨이 상주할 ONTAP 클러스터의 IPspace에 액세스합니다.


endif::gcp[]

* StorageGRID에서 복구할 때 StorageGRID 서버의 FQDN과 ONTAP이 StorageGRID와 HTTPS 통신에 사용해야 하는 포트를 입력하고, 객체 스토리지에 액세스하는 데 필요한 액세스 키 및 비밀 키를 선택하고, 대상 볼륨이 상주할 ONTAP 클러스터의 IPspace를 선택합니다.
+
.. 복원된 볼륨에 사용할 이름을 입력하고 볼륨이 상주하는 스토리지 VM을 선택합니다. 기본적으로 * <source_volume_name>_restore * 가 볼륨 이름으로 사용됩니다.
+
image:screenshot_restore_new_vol_name.png["복원하려는 새 볼륨의 이름을 입력하는 스크린샷."]

+
볼륨을 온-프레미스 ONTAP 시스템으로 복원할 때만 볼륨의 '용량'에 사용할 Aggregate를 선택할 수 있습니다.

+
아카이브 스토리지 계층에 있는 백업 파일(ONTAP 9.10.1부터 사용 가능)에서 볼륨을 복원하는 경우 복원 우선 순위를 선택할 수 있습니다.

+
ifdef::aws[]





link:reference-aws-backup-tiers.html#restoring-data-from-archival-storage["AWS 아카이브 스토리지에서 복원하는 방법에 대해 자세히 알아보십시오"].

endif::aws[]

ifdef::azure[]

link:reference-azure-backup-tiers.html#restoring-data-from-archival-storage["Azure 아카이브 스토리지에서 복원에 대해 자세히 알아보십시오"].

endif::azure[]

. 복원 * 을 클릭하면 복원 작업의 진행률을 검토할 수 있도록 복원 대시보드로 돌아갑니다.


Cloud Backup은 선택한 백업을 기반으로 새 볼륨을 생성합니다. 가능합니다 link:task-manage-backups-ontap.html["이 새 볼륨에 대한 백업 설정을 관리합니다"] 필요에 따라.

아카이브 스토리지에 있는 백업 파일에서 볼륨을 복원하는 데는 아카이브 계층 및 복원 우선 순위에 따라 몇 분 또는 몇 시간이 걸릴 수 있습니다. Job Monitor* 탭을 클릭하여 복원 진행률을 확인할 수 있습니다.



=== 찾아보기 및 복원을 사용하여 ONTAP 파일을 복원합니다

ONTAP 볼륨 백업에서 일부 파일만 복원해야 하는 경우 전체 볼륨을 복원하는 대신 개별 파일을 복원하도록 선택할 수 있습니다. 원래 작업 환경의 기존 볼륨이나 동일한 클라우드 계정을 사용하는 다른 작업 환경으로 파일을 복원할 수 있습니다. 또한 온프레미스 ONTAP 시스템의 볼륨에 파일을 복원할 수도 있습니다.

여러 파일을 선택하면 모든 파일이 선택한 동일한 대상 볼륨으로 복원됩니다. 따라서 파일을 다른 볼륨으로 복원하려면 복원 프로세스를 여러 번 실행해야 합니다.


TIP: 백업 파일이 아카이브 스토리지에 있는 경우 개별 파일을 복원할 수 없습니다. 이 경우 보관되지 않은 최신 백업 파일에서 파일을 복원하거나, 아카이빙된 백업에서 전체 볼륨을 복원한 다음 필요한 파일에 액세스하거나, 검색 및 복원을 사용하여 파일을 복원할 수 있습니다.



==== 필수 구성 요소

* 파일 복원 작업을 수행하려면 Cloud Volumes ONTAP 또는 온프레미스 ONTAP 시스템에서 ONTAP 버전이 9.6 이상이어야 합니다.


ifdef::aws[]

* AWS 교차 계정 복원에는 AWS 콘솔에서 수동으로 수행해야 합니다. AWS 항목을 참조하십시오 https://docs.aws.amazon.com/AmazonS3/latest/dev/example-walkthroughs-managing-access-example2.html["교차 계정 버킷 권한 부여"^] 를 참조하십시오.


endif::aws[]



==== 파일 복원 프로세스

프로세스는 다음과 같습니다.

. 볼륨 백업에서 하나 이상의 파일을 복원하려면 * 복원 * 탭을 클릭하고, _찾아보기 및 복원_에서 * 파일 복원 * 을 클릭한 다음 파일(또는 파일)이 있는 백업 파일을 선택합니다.
. 클라우드 백업은 선택한 백업 파일 내에 있는 폴더와 파일을 표시합니다.
. 해당 백업에서 복원할 파일(또는 파일)을 선택합니다.
. 파일을 복원할 위치(작업 환경, 볼륨 및 폴더)를 선택하고 * 복원 * 을 클릭합니다.
. 파일이 복원됩니다.


image:diagram_browse_restore_file.png["Browse & amp; Restore를 사용하여 파일 복원 작업을 수행하는 흐름을 보여 주는 다이어그램"]

보시다시피 파일 복원을 수행하려면 작업 환경 이름, 볼륨 이름, 백업 파일 날짜 및 파일 이름을 알아야 합니다.



==== 찾아보기 및 복원을 사용하여 파일을 복원합니다

다음 단계에 따라 ONTAP 볼륨 백업에서 볼륨에 파일을 복원합니다. 파일 또는 파일을 복원하는 데 사용할 백업 파일의 날짜와 볼륨의 이름을 알아야 합니다. 이 기능은 Live Browsing을 사용하여 각 백업 파일 내의 디렉터리 및 파일 목록을 볼 수 있습니다.

다음 비디오에서는 단일 파일 복원에 대한 간단한 단계별 안내를 보여 줍니다.

video::9Og5agUWyRk[youtube,width=848,height=480,start=165]
.단계
. 백업 및 복원 * 서비스를 선택합니다.
. Restore * 탭을 클릭하면 Restore Dashboard가 표시됩니다.
. Browse & Restore _ 섹션에서 * Restore Files * 를 클릭합니다.
+
image:screenshot_restore_files_selection.png["Restore Dashboard에서 Restore Files 버튼을 선택하는 스크린샷"]

. Select Source_페이지에서 복원하려는 파일이 포함된 볼륨의 백업 파일을 찾습니다. 파일을 복원할 날짜/시간 스탬프가 있는 * Working Environment *, * Volume * 및 * Backup * 을 선택합니다.
+
image:screenshot_restore_select_source.png["복원할 파일의 볼륨 및 백업 선택 스크린샷."]

. Continue * 를 클릭하면 볼륨 백업의 폴더 및 파일 목록이 표시됩니다.
+
image:screenshot_restore_select_files.png["복원할 파일을 탐색할 수 있는 파일 선택 페이지의 스크린 샷"]

. Select Files_page(파일 선택_페이지)에서 복원하려는 파일을 선택하고 * Continue *(계속 *)를 클릭합니다. 파일을 찾는 데 도움이 되는 방법은 다음과 같습니다.
+
** 파일 이름이 표시되면 해당 이름을 클릭할 수 있습니다.
** 검색 아이콘을 클릭하고 파일 이름을 입력하여 파일로 직접 이동할 수 있습니다.
** 를 사용하여 폴더의 하위 수준을 탐색할 수 있습니다 image:button_subfolder.png[""] 버튼을 클릭하여 파일을 찾습니다.
+
파일을 선택하면 이미 선택한 파일을 볼 수 있도록 페이지 왼쪽에 추가됩니다. 필요한 경우 파일 이름 옆의 * x * 를 클릭하여 이 목록에서 파일을 제거할 수 있습니다.



. 대상 선택 페이지에서 파일을 복원할 * 작업 환경 * 을 선택합니다.
+
image:screenshot_restore_select_work_env.png["복원하려는 파일의 대상 작업 환경을 선택하는 스크린샷."]

+
사내 클러스터를 선택하고 오브젝트 스토리지에 대한 클러스터 연결을 아직 구성하지 않은 경우 추가 정보를 묻는 메시지가 표시됩니다.

+
ifdef::aws[]

+
** Amazon S3에서 복원할 때 대상 볼륨이 있는 ONTAP 클러스터에 IPspace를 입력하고 오브젝트 스토리지에 액세스하는 데 필요한 AWS 액세스 키 및 비밀 키를 입력합니다.




endif::aws[]

ifdef::azure[]

* Azure Blob에서 복구할 경우 대상 볼륨이 있는 ONTAP 클러스터에 IPspace를 입력합니다.


endif::azure[]

ifdef::gcp[]

* Google 클라우드 스토리지에서 복원할 때 대상 볼륨이 있는 ONTAP 클러스터에 IPspace를 입력하고 오브젝트 스토리지에 액세스하는 데 필요한 액세스 키 및 비밀 키를 입력합니다.


endif::gcp[]

* StorageGRID에서 복구할 때 StorageGRID 서버의 FQDN과 ONTAP이 StorageGRID과의 HTTPS 통신에 사용해야 하는 포트를 입력하고, 오브젝트 스토리지에 액세스하는 데 필요한 액세스 키 및 비밀 키, 대상 볼륨이 있는 ONTAP 클러스터의 IPspace를 입력합니다.
+
.. 그런 다음 파일을 복원할 * 볼륨 * 과 * 폴더 * 를 선택합니다.
+
image:screenshot_restore_select_dest.png["복원하려는 파일의 볼륨 및 폴더를 선택하는 스크린샷."]

+
파일을 복원할 때 위치에 대한 몇 가지 옵션이 있습니다.



* 위와 같이 * 대상 폴더 선택 * 을 선택한 경우:
+
** 폴더를 선택할 수 있습니다.
** 폴더 위로 마우스를 가져가 을 클릭할 수 있습니다 image:button_subfolder.png[""] 행 끝에서 하위 폴더로 드릴다운한 다음 폴더를 선택합니다.


* 소스 파일이 있는 위치와 동일한 대상 작업 환경 및 볼륨을 선택한 경우 * 소스 폴더 경로 유지 * 를 선택하여 파일 또는 모든 파일을 소스 구조에 있는 동일한 폴더로 복원할 수 있습니다. 모든 동일한 폴더와 하위 폴더가 이미 존재해야 하며 폴더가 생성되지 않습니다.
+
.. 복원 * 을 클릭하면 복원 작업의 진행률을 검토할 수 있도록 복원 대시보드로 돌아갑니다. 또한 * Job Monitor * 탭을 클릭하여 복원 진행률을 확인할 수도 있습니다.






== 검색 및 복원을 사용하여 ONTAP 데이터를 복원합니다

검색 및 복원을 사용하여 ONTAP 백업 파일에서 볼륨이나 개별 파일을 복원할 수 있습니다. 검색 및 복원을 사용하면 특정 공급자에 대해 클라우드 스토리지에 저장된 모든 백업에서 특정 볼륨이나 파일을 검색한 다음 복구를 수행할 수 있습니다. 정확한 작업 환경 이름 또는 볼륨 이름을 알 필요가 없습니다. 모든 볼륨 백업 파일을 검색합니다.

또한 검색 작업을 통해 ONTAP 볼륨에 대한 모든 로컬 스냅샷 복사본을 확인합니다. 로컬 스냅샷 복사본에서 데이터를 복원하는 것이 백업 파일에서 복원하는 것보다 빠르고 비용이 적게 들 수 있으므로 스냅샷에서 데이터를 복원할 수 있습니다. Canvas의 볼륨 세부 정보 페이지에서 스냅샷을 새 볼륨으로 복원할 수 있습니다.

백업 파일에서 볼륨을 복원하면 Cloud Backup은 백업의 데이터를 사용하여 _new_volume을 생성합니다. 원래 작업 환경에서 데이터를 볼륨으로 복원하거나 소스 작업 환경과 동일한 클라우드 계정에 있는 다른 작업 환경으로 복원할 수 있습니다. 또한, 볼륨을 온프레미스 ONTAP 시스템으로 복원할 수 있습니다.

파일을 원래 볼륨 위치, 동일한 작업 환경의 다른 볼륨 또는 동일한 클라우드 계정을 사용하는 다른 작업 환경으로 복원할 수 있습니다. 또한 온프레미스 ONTAP 시스템의 볼륨에 파일을 복원할 수도 있습니다.

복원하려는 볼륨의 백업 파일이 아카이브 스토리지(ONTAP 9.10.1부터 사용 가능)에 있는 경우 복원 작업에 더 많은 시간이 소요되고 추가 비용이 발생합니다. 대상 클러스터도 ONTAP 9.10.1 이상을 실행해야 하며 아카이브 스토리지에서 파일 복원은 현재 지원되지 않습니다.

ifdef::aws[]

link:reference-aws-backup-tiers.html["AWS 아카이브 스토리지에서 복원하는 방법에 대해 자세히 알아보십시오"].

endif::aws[]

ifdef::azure[]

endif::azure[]

시작하기 전에 복원하려는 볼륨이나 파일의 이름이나 위치를 알고 있어야 합니다.

다음 비디오에서는 단일 파일 복원에 대한 간단한 단계별 안내를 보여 줍니다.

video::RZktLe32hhQ[youtube,width=848,height=480]


=== 검색 및 복원 지원되는 작업 환경 및 오브젝트 스토리지 공급자

ONTAP 백업 파일에서 다음 작업 환경으로 볼륨 또는 개별 파일을 복원할 수 있습니다.

[cols="25,40,40"]
|===
| 백업 파일 위치 2+| 대상 작업 환경 


|  | * 볼륨 복원 * | * 파일 복원 * ifdef::AWS[] 


| Amazon S3 | Cloud Volumes ONTAP를 사내의 AWS ONTAP 시스템에 설치하고 | Cloud Volumes ONTAP in AWS on-premises ONTAP system endif::AWS[]ifdef::Azure[] 


| Azure Blob | 현재 지원되지 않습니다 | endif::Azure [] ifdef::Azure []endif::Azure []ifdef::GCP [] 


| Google 클라우드 스토리지 | Google 사내 ONTAP 시스템의 Cloud Volumes ONTAP | Google 사내 ONTAP 시스템의 Cloud Volumes ONTAP::GCP [] 


| NetApp StorageGRID를 참조하십시오 | 현재 지원되지 않습니다 |  
|===

TIP: 이 지원을 받으려면 Connector를 클라우드 공급자 플랫폼에 구축해야 합니다. Connector가 구내에 설치되어 있으면 검색 및 복원이 지원되지 않습니다.

"사내 ONTAP 시스템"을 지칭할 때 FAS, AFF 및 ONTAP Select 시스템이 포함됩니다.



=== 필수 구성 요소

* 클러스터 요구 사항:
+
** ONTAP 버전은 9.8 이상이어야 합니다.
** 볼륨이 상주하는 스토리지 VM(SVM)에는 데이터 LIF가 구성되어 있어야 합니다.
** 볼륨에 NFS가 활성화되어 있어야 합니다.
** SVM에서 SnapDiff RPC 서버를 활성화해야 합니다. 작업 환경에서 인덱싱을 활성화하면 Cloud Manager가 이 작업을 자동으로 수행합니다.




ifdef::aws[]

* AWS 요구사항:
+
** Cloud Manager에 권한을 제공하는 사용자 역할에 특정 Amazon Athena, AWS Glue 및 AWS S3 권한을 추가해야 합니다. link:task-backup-onprem-to-aws.html#set-up-s3-permissions["모든 권한이 올바르게 구성되었는지 확인합니다"].
+
이전에 구성한 Connector와 함께 Cloud Backup을 이미 사용하고 있는 경우, 이제 Athena 및 Glue 권한을 Cloud Manager 사용자 역할에 추가해야 합니다. 새로운 항목이므로 검색 및 복원에 필요합니다.





endif::aws[]

ifdef::azure[]

endif::azure[]

ifdef::gcp[]

* Google Cloud 요구사항:
+
** Cloud Manager에 권한을 제공하는 사용자 역할에 특정 Google BigQuery 권한을 추가해야 합니다. link:task-backup-onprem-to-gcp.html#verify-or-add-permissions-to-the-connector["모든 권한이 올바르게 구성되었는지 확인합니다"].
+
이전에 구성한 Connector와 함께 Cloud Backup을 이미 사용하고 있는 경우 지금 BigQuery 권한을 Cloud Manager 사용자 역할에 추가해야 합니다. 새로운 항목이므로 검색 및 복원에 필요합니다.





endif::gcp[]



=== 검색 및 복원 프로세스

프로세스는 다음과 같습니다.

. 검색 및 복원을 사용하려면 볼륨이나 파일을 복원할 각 소스 작업 환경에서 "인덱싱"을 활성화해야 합니다. 따라서 인덱싱된 카탈로그를 통해 모든 볼륨의 백업 파일을 추적할 수 있습니다.
. 볼륨 백업에서 볼륨이나 파일을 복원하려면 _Search & Restore_ 아래에서 * 검색 및 복원 * 을 클릭합니다.
. 볼륨 또는 파일의 검색 기준을 전체 또는 일부 볼륨 이름, 전체 파일 이름, 크기 범위, 생성 날짜 범위, 기타 검색 필터로 입력하고 * 검색 * 을 클릭합니다.
+
검색 결과 페이지에는 검색 기준과 일치하는 파일 또는 볼륨이 있는 모든 위치가 표시됩니다.

. 볼륨 또는 파일을 복원하는 데 사용할 위치에 대한 모든 백업 보기 * 를 클릭한 다음 사용할 실제 백업 파일에서 * 복원 * 을 클릭합니다.
. 볼륨이나 파일을 복원할 위치를 선택하고 * 복원 * 을 클릭합니다.
. 볼륨 또는 파일이 복원됩니다.


image:diagram_search_restore_vol_file.png["검색 및 앰프, 복원을 사용하여 볼륨 또는 파일 복원 작업을 수행하는 흐름을 보여 주는 다이어그램"]

보시다시피, 부분 볼륨 또는 파일 이름만 알면 되며 Cloud Backup은 검색과 일치하는 모든 백업 파일을 검색합니다.



=== 각 작업 환경에 대해 인덱싱된 카탈로그 활성화

검색 및 복원을 사용하려면 볼륨 또는 파일을 복원할 각 소스 작업 환경에서 "인덱싱"을 활성화해야 합니다. 따라서 인덱싱된 카탈로그를 통해 모든 볼륨과 모든 백업 파일을 추적할 수 있어 검색이 매우 빠르고 효율적입니다.

이 기능을 활성화하면 Cloud Backup은 SVM에서 볼륨에 대해 SnapDiff v3을 활성화하고 다음 작업을 수행합니다.

ifdef::aws[]

* AWS에 저장된 백업의 경우 새로운 S3 버킷과 을 프로비저닝합니다 https://aws.amazon.com/athena/faqs/["아마존 Athena 대화형 쿼리 서비스"^] 및 https://aws.amazon.com/glue/faqs/["AWS Glue 서버리스 데이터 통합 서비스"^].


endif::aws[]

ifdef::azure[]

endif::azure[]

ifdef::gcp[]

* Google Cloud에 저장된 백업의 경우 IT 부서는 새로운 버킷과 을 프로비저닝합니다 https://cloud.google.com/bigquery["Google Cloud BigQuery 서비스"^] 계정/프로젝트 수준에서 프로비저닝됩니다.


endif::gcp[]

작업 환경에 대해 인덱싱이 이미 활성화되어 있는 경우 다음 섹션으로 이동하여 데이터를 복원합니다.

작업 환경의 인덱싱 활성화하기:

* 작업 환경이 인덱싱되지 않은 경우, 복구 대시보드의 _Search & Restore_ 아래에서 * 작업 환경에 대한 인덱싱 사용 * 을 클릭하고 작업 환경에 대해 * 인덱싱 사용 * 을 클릭합니다.
* 하나 이상의 작업 환경이 이미 인덱싱된 경우, 복구 대시보드의 _Search & Restore_ 아래에서 * 인덱싱 설정 * 을 클릭하고 작업 환경에 대해 * 인덱싱 사용 * 을 클릭합니다.


모든 서비스가 프로비저닝되고 인덱싱된 카탈로그가 활성화되면 작업 환경이 "활성"으로 표시됩니다.

image:screenshot_restore_enable_indexing.png["인덱싱된 카탈로그를 활성화한 작업 환경을 보여 주는 스크린샷"]

작업 환경의 볼륨 크기와 클라우드의 백업 파일 수에 따라 초기 인덱싱 프로세스에 최대 1시간이 걸릴 수 있습니다. 그 이후에는 운영 환경에 영향을 미치지 않고 매시간 업데이트되며, 지속적으로 변경될 수 있습니다.



=== 검색 및 복원을 사용하여 볼륨 및 파일을 복원합니다

먼저 해 <<Enabling the Indexed Catalog for each working environment,작업 환경에 대한 인덱싱 기능을 활성화했습니다>>, 검색 및 복원을 사용하여 볼륨이나 파일을 복원할 수 있습니다. 이를 통해 광범위한 필터를 사용하여 모든 백업 파일에서 복원하려는 정확한 파일 또는 볼륨을 찾을 수 있습니다.

.단계
. 백업 및 복원 * 서비스를 선택합니다.
. Restore * 탭을 클릭하면 Restore Dashboard가 표시됩니다.
. Search & Restore _ 섹션에서 * Search & Restore * 를 클릭합니다.
+
image:screenshot_restore_start_search_restore.png["Restore Dashboard에서 Search & amp; Restore 버튼을 선택하는 스크린샷."]

. 검색 및 복원 페이지에서 다음을 수행합니다.
+
.. 검색 표시줄에 전체 또는 부분 볼륨 이름 또는 파일 이름을 입력합니다.
.. 필터 영역에서 필터 기준을 선택합니다. 예를 들어 데이터가 있는 작업 환경과 파일 형식(예: .doc 파일)을 선택할 수 있습니다.


. 검색 * 을 클릭하면 검색 결과 영역에 검색과 일치하는 파일 또는 볼륨이 있는 모든 위치가 표시됩니다.
+
image:screenshot_restore_step1_search_restore.png["검색 및 amp; 복원 페이지에서 검색 기준과 검색 결과를 보여주는 스크린샷."]

. 복원하려는 데이터가 있는 위치에 대해 * 모든 백업 보기 * 를 클릭하면 볼륨 또는 파일이 포함된 모든 백업 파일이 표시됩니다.
+
image:screenshot_restore_step2_search_restore.png["검색 기준과 일치하는 모든 백업을 보는 방법을 보여 주는 스크린샷"]

. 클라우드에서 볼륨 또는 파일을 복원하는 데 사용할 백업 파일에 대해 * 복원 * 을 클릭합니다.
+
검색 결과에 파일이 포함된 로컬 볼륨 스냅샷 복사본도 포함됩니다. 현재 스냅샷에 대해 * 복원 * 버튼이 작동하지 않지만 백업 파일 대신 스냅샷 복사본에서 데이터를 복원하려면 볼륨의 이름과 위치를 적어 두고 Canvas에서 볼륨 세부 정보 페이지를 엽니다. 및 * 스냅샷 복사본에서 복원 * 옵션을 사용합니다.

. 볼륨이나 파일을 복원할 위치를 선택하고 * 복원 * 을 클릭합니다.
+
** 파일의 경우 원래 위치로 복원하거나 대체 위치를 선택할 수 있습니다
** 볼륨의 경우 위치를 선택할 수 있습니다.




볼륨 또는 파일이 복원되고 복구 작업의 진행률을 검토할 수 있도록 복구 대시보드로 돌아갑니다. 또한 * Job Monitor * 탭을 클릭하여 복원 진행률을 확인할 수도 있습니다.

복원된 볼륨의 경우 를 사용할 수 있습니다 link:task-manage-backups-ontap.html["이 새 볼륨에 대한 백업 설정을 관리합니다"] 필요에 따라.
